<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>K-NET ‚Ä¢ Core System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<style>
:root{
  --accent:#7aa2ff;
  --bg:#02030f;
  --panel:rgba(8,12,35,.92);
  --text:#dbe6ff;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:var(--bg);
  font-family:'Orbitron',sans-serif;
  overflow:hidden;
  color:var(--text);
}

/* ===== THREE CANVAS ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:-2;
}

/* ===== HUD ===== */
#hud{
  position:fixed;
  inset:0;
  display:flex;
}

/* SIDEBAR */
#sidebar{
  width:260px;
  background:var(--panel);
  border-right:1px solid rgba(122,162,255,.25);
  padding:24px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.logo{
  font-size:1.8rem;
  font-weight:900;
  color:var(--accent);
  text-shadow:0 0 15px var(--accent);
}

.menu button{
  background:none;
  border:1px solid rgba(122,162,255,.25);
  color:var(--text);
  padding:12px;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}

.menu button:hover,
.menu button.active{
  box-shadow:0 0 20px var(--accent);
}

/* CONTENT */
#content{
  flex:1;
  padding:28px;
  display:flex;
  flex-direction:column;
}

/* CHAT */
#messages{
  flex:1;
  background:rgba(5,10,30,.85);
  border-radius:18px;
  padding:16px;
  overflow-y:auto;
  margin-bottom:14px;
}

.message{
  margin-bottom:10px;
  padding:10px 14px;
  border-radius:14px;
  background:rgba(20,30,70,.7);
  animation:fadeUp .3s ease;
}

.message.me{
  background:linear-gradient(135deg,#7aa2ff,#4c6fff);
  color:#02030a;
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(10px)}
  to{opacity:1}
}

textarea,button{
  padding:14px;
  border-radius:14px;
  border:1px solid rgba(122,162,255,.3);
  background:rgba(10,15,40,.95);
  color:#fff;
  font-family:inherit;
}

textarea{
  resize:none;
  height:60px;
  margin-bottom:10px;
}

button{
  cursor:pointer;
  font-weight:700;
  background:linear-gradient(135deg,#7aa2ff,#9b7aff);
  border:none;
}

/* PROFILE */
#profile{
  margin-top:20px;
  padding:16px;
  border-radius:16px;
  background:rgba(10,15,40,.8);
  border:1px solid rgba(122,162,255,.25);
}
</style>
</head>

<body>

<!-- THREE -->
<script>
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,100);
camera.position.z=6;

const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

/* SPHERE CORE */
const sphere=new THREE.Mesh(
  new THREE.SphereGeometry(2,64,64),
  new THREE.MeshStandardMaterial({
    color:0x2233ff,
    emissive:0x7aa2ff,
    emissiveIntensity:0.6,
    metalness:0.7,
    roughness:0.3
  })
);
scene.add(sphere);

/* LIGHT */
scene.add(new THREE.PointLight(0x7aa2ff,2,15));
scene.add(new THREE.AmbientLight(0x404060));

function animate(){
  requestAnimationFrame(animate);
  sphere.rotation.y+=0.0015;
  renderer.render(scene,camera);
}
animate();

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

<!-- HUD -->
<div id="hud">
  <div id="sidebar">
    <div class="logo">K-NET</div>

    <div class="menu">
      <button class="active">üåê Global</button>
      <button>üë§ Profile</button>
      <button onclick="logout()">üö™ Logout</button>
    </div>

    <div id="profile">
      <div><strong id="nick">‚Äî</strong></div>
      <div id="role" style="opacity:.7"></div>
    </div>
  </div>

  <div id="content">
    <div id="messages"></div>
    <textarea id="text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶"></textarea>
    <button onclick="send()">Send</button>
  </div>
</div>

<script type="module">
/* ===== FIREBASE ===== */
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig={
  apiKey:"AIzaSyBLbswX9MiSInVqNW12POJ5OmAYKgy2ERw",
  authDomain:"projet-56900.firebaseapp.com",
  databaseURL:"https://projet-56900-default-rtdb.europe-west1.firebasedatabase.app",
  projectId:"projet-56900",
  storageBucket:"projet-56900.firebasestorage.app",
  messagingSenderId:"753669702381",
  appId:"1:753669702381:web:0ac180682fba00c68542e4"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getDatabase(app);

let me=null;

onAuthStateChanged(auth,u=>{
  if(!u) location.href='index.html';
  me=u;
});

/* LOAD PROFILE */
onValue(ref(db,'users'),snap=>{
  const data=snap.child(me.uid).val();
  if(!data) return;
  nick.textContent=data.nick;
  role.textContent=data.role;
});

/* CHAT */
onValue(ref(db,'messages'),snap=>{
  messages.innerHTML='';
  snap.forEach(m=>{
    const d=m.val();
    const div=document.createElement('div');
    div.className='message'+(d.uid===me.uid?' me':'');
    div.innerHTML=`<strong>${d.nick}</strong><br>${d.text}`;
    messages.appendChild(div);
  });
  messages.scrollTop=messages.scrollHeight;
});

window.send=()=>{
  if(!text.value) return;
  push(ref(db,'messages'),{
    uid:me.uid,
    nick:nick.textContent,
    text:text.value,
    time:Date.now()
  });
  text.value='';
};

window.logout=()=>{
  signOut(auth);
};
</script>

</body>
</html>



